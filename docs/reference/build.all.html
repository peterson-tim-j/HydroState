<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="build.all builds all possible combinations of hydroState models. The same fields are available as in build() in order to specify the type of models to be built. After all models are built, they are fitted using the same fit.hydroState() function."><title>Builds all hydroState models — build.all • hydroState</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Builds all hydroState models — build.all"><meta property="og:description" content="build.all builds all possible combinations of hydroState models. The same fields are available as in build() in order to specify the type of models to be built. After all models are built, they are fitted using the same fit.hydroState() function."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">hydroState</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/hydroState.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/adjust.state.model.html">Adjust the default state model</a>
    <a class="dropdown-item" href="../articles/subAnnual.models.html">Seasonal and monthly models</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/peterson-tim-j/HydroState/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Builds all hydroState models</h1>
      <small class="dont-index">Source: <a href="https://github.com/peterson-tim-j/HydroState/blob/HEAD/R/wrapper.R" class="external-link"><code>R/wrapper.R</code></a></small>
      <div class="d-none name"><code>build.all.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>build.all</code> builds all possible combinations of hydroState models. The same fields are available as in <code><a href="build.html">build()</a></code> in order to specify the type of models to be built. After all models are built, they are fitted using the same <code><a href="fit.hydroState.html">fit.hydroState()</a></code> function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build.all</span><span class="op">(</span></span>
<span>  input.data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>, flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>, precip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  data.transform <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seasonal.parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  state.shift.parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  error.distribution <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  flickering <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  transition.graph <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summary.table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  siteID <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>input.data</dt>
<dd><p>dataframe of annual, seasonal, or monthly runoff and precipitation observations. Gaps with missing data in either streamflow or precipitation are permitted, and the handling of them is further discussed in <code>build</code>. Monthly data is required when using <code>seasonal.parameters</code> that assumes selected model parameters are better defined with a sinusoidal function.</p></dd>


<dt>data.transform</dt>
<dd><p>character string of method of transformation. If empty, the default builds all possible combinations of models with <code>boxcox</code> data transformation.</p></dd>


<dt>parameters</dt>
<dd><p>character vector of parameters to determine model form. If empty, the default builds all possible combinations of model forms.</p></dd>


<dt>seasonal.parameters</dt>
<dd><p>character vector of parameters with sinusoidal function to represent seasonal variation. Requires monthly or seasonal data. If empty and monthly or seasonal data is given, the default builds all possible combinations of models with a seasonal parameter for each and all parameters.</p></dd>


<dt>state.shift.parameters</dt>
<dd><p>character vector of one or all parameters to identify state dependent parameters. Only one set of parameters permitted. If empty, the default builds all possible model combinations with <code>c('a0','std')</code> as state shift parameters.</p></dd>


<dt>error.distribution</dt>
<dd><p>character string of the distribution in the HMM error. If empty, the default builds models with all possible combinations of error distribution: <code>c('truc.normal', 'normal','gamma')</code></p></dd>


<dt>flickering</dt>
<dd><p>logical <code>TRUE</code>/<code>FALSE</code>. <code>TRUE</code> = allows more sensitive markov flickering between states over time. When <code>FALSE</code> (default), state needs to persist for at least three time steps before state shift can occur.</p></dd>


<dt>transition.graph</dt>
<dd><p>matrix given the number of states. If empty, the default builds models with all possible combinations of states: 1-state matrix (1 by 1): codematrix(TRUE,1,1),  2-state matrix (2 by 2): <code>matrix(TRUE,2,2)</code>, 3-state matrix (3 by 3): <code>matrix(TRUE,3,3)</code>.</p></dd>


<dt>summary.table</dt>
<dd><p>data frame with a table summarizing all built models and corresponding reference model. From function <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>. If empty, summary table will be built automatically.</p></dd>


<dt>siteID</dt>
<dd><p>character string of site identifier.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of built hydroState models with every combination of objects ready to be fitted</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>build.all</code></p>
<p>All possible combinations of hydroState models are built for each auto-correlation lag and residual distribution from 1 to 3 states for a specified data transformation. This allows for investigation of state changes in the <code>state.shift.parameters</code>: the intercept <code>c('a0', 'std')</code> or slope <code>c('a1', 'std')</code>. To reduce the number of models in the search, specify which field(s) to remain constant. For example, to investigate the best model with the number of auto-correlation terms and number of states with a <code>boxcox</code> data transform and <code>gamma</code> distribution of the residuals, set <code>data.transform</code> to <code>boxcox</code> and <code>error.distribution</code> to <code>gamma</code>. If no fields are specified, all possible model combinations are built. If investigating state shifts in the intercept <code>a0</code> and slope <code>a1</code>, it is recommended to build and fit the model combinations separately.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">streamflow_annual_221201</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Build all annual models with state shift in intercept 'a0'</span></span></span>
<span class="r-in"><span><span class="va">all.annual.models</span> <span class="op">=</span> <span class="fu">build.all</span><span class="op">(</span>input.data <span class="op">=</span> <span class="va">streamflow_annual_221201</span>,</span></span>
<span class="r-in"><span>                                    state.shift.parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a0'</span>,<span class="st">'std'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     siteID <span class="op">=</span> <span class="st">'221201'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># OR</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Build all annual models with state shift in slope 'a1'</span></span></span>
<span class="r-in"><span><span class="va">all.annual.models</span> <span class="op">=</span> <span class="fu">build.all</span><span class="op">(</span>input.data <span class="op">=</span> <span class="va">streamflow_annual_221201</span>,</span></span>
<span class="r-in"><span>                                    state.shift.parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a1'</span>,<span class="st">'std'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     siteID <span class="op">=</span> <span class="st">'221201'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Tim Peterson, Thomas Westfall.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

